<!DOCTYPE html>
<html>
 <head> 
  <title>Example 09.01 - Basic animations</title> 
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r61/three.min.js"></script> 
  <script type="text/javascript" src="jquery-1.9.0.js"></script> 
  <script type="text/javascript" src="stats.js"></script> 
  <script type="text/javascript" src="dat.gui.js"></script> 
  <style>

		body{
  background-color: #000000;
  margin: 0px;
  padding: 0;
    overflow: hidden;
}

#dir{
    background-color: #ffffff;
    position: absolute;
    font-family:"Times New Roman";
    font-size:12px;
    font-weight:bold;
    min-width:300px;
    text-align:center;
    right: 5px;
    top: 5px;
    opacity:0.5;
}
    </style> 

 </head> 
 <body> 
 
  <div id="Stats-output"> 
  </div> 
  <!-- Div which will hold the Output --> 
<div id="dir"> Click Anywhere For More </div> 
 <div id="WebGL-output"> 

  </div> 
  <!-- Javascript code that runs our Three.js examples --> 
  <script type="text/javascript">
   $(function () {
     var stats = initStats();
		
//////////////settings/////////
var movementSpeed = 80;
var totalObjects = 1000;
var objectSize = 100;
var sizeRandomness = 4000;
var colors = [0xFF0FFF, 0xCCFF00, 0xFF000F, 0x996600, 0xFFFFFF];
/////////////////////////////////
var dirs = [];
var parts = [];
var container = document.createElement('div');
document.body.appendChild( container );

var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight,1, 10000)
camera.position.z = 1000; 

var scene = new THREE.Scene(); 

function ExplodeAnimation(x,y)
{
  var geometry = new THREE.Geometry();
  
  for (i = 0; i < totalObjects; i ++) 
  { 
    var vertex = new THREE.Vector3();
    vertex.x = x;
    vertex.y = y;
    vertex.z = 10;
  
    geometry.vertices.push( vertex );
    dirs.push({x:(Math.random() * movementSpeed)-(movementSpeed/2),y:(Math.random() * movementSpeed)-(movementSpeed/2),z:(Math.random() * movementSpeed)-(movementSpeed/2)});
  }
  var material = new THREE.ParticleBasicMaterial( { size: objectSize,  color: colors[Math.round(Math.random() * colors.length)] });
  var particles = new THREE.ParticleSystem( geometry, material );
  
  this.object = particles;
  this.status = true;
  
  this.xDir = (Math.random() * movementSpeed)-(movementSpeed/2);
  this.yDir = (Math.random() * movementSpeed)-(movementSpeed/2);
  this.zDir = (Math.random() * movementSpeed)-(movementSpeed/2);
  
  scene.add( this.object  ); 
  
  this.update = function(){
    if (this.status == true){
      var pCount = totalObjects;
      while(pCount--) {
        var particle =  this.object.geometry.vertices[pCount]
        particle.y += dirs[pCount].y;
        particle.x += dirs[pCount].x;
        particle.z += dirs[pCount].z;
      }
      this.object.geometry.verticesNeedUpdate = true;
    }
  }
  
}

var renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
container.appendChild( renderer.domElement );


parts.push(new ExplodeAnimation(0, 0));
	 
		// add the output of the renderer to the html element
        $("#WebGL-output").append(renderer.domElement);

        // by requestAnimationFrame
        render();
	 
	 function render() {
        // render using requestAnimationFrame
        requestAnimationFrame(render);
        renderer.render(scene, camera);
    }
  
   var controls = new function () {
            this.rotationSpeed = 0.02;
            this.bouncingSpeed = 0.03;
            this.scalingSpeed = 0.03;
        }

        var gui = new dat.GUI();
        gui.add(controls, 'rotationSpeed', 0, 0.5);
        gui.add(controls, 'bouncingSpeed', 0, 0.5);
        gui.add(controls, 'scalingSpeed', 0, 0.5);

  
  function initStats() {

            var stats = new Stats();

            stats.setMode(0); // 0: fps, 1: ms

            // Align top-left
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.left = '0px';
            stats.domElement.style.top = '0px';

            $("#Stats-output").append(stats.domElement);

            return stats;
        }
  
   });
</script>  
 </body>
</html>